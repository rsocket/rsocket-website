<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-about/faq">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Frequently Asked Questions | RSocket</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://rsocket.io/about/faq"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:image" content="https://rsocket.io/img/social/rsocket-io-facebook-og.jpg"><meta data-rh="true" name="twitter:image" content="https://rsocket.io/img/social/rsocket-io-twitter-card.jpg"><meta data-rh="true" name="twitter:site" content="@rsocket"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Frequently Asked Questions | RSocket"><meta data-rh="true" name="description" content="Why a new protocol?"><meta data-rh="true" property="og:description" content="Why a new protocol?"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://rsocket.io/about/faq"><link data-rh="true" rel="alternate" href="https://rsocket.io/about/faq" hreflang="en"><link data-rh="true" rel="alternate" href="https://rsocket.io/about/faq" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-875HQF3Z9F"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-875HQF3Z9F",{})</script>



<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js" async></script><link rel="stylesheet" href="/assets/css/styles.8d0345e6.css">
<link rel="preload" href="/assets/js/runtime~main.7160a9ac.js" as="script">
<link rel="preload" href="/assets/js/main.e90efc2b.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<a href="https://crowdfunding.lfx.linuxfoundation.org/projects/bb4066fb-8137-4557-8224-f17dba073494" rel="noopener noreferrer" target="_blank" class="ribbon-support_yvgN ribbon-right_bbuW"><span>Support RSocket</span></a><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="https://rsocket.io/img/r-socket-pink.svg" alt="" class="themedImage_ToTc themedImage--light_HNdA"><img src="https://rsocket.io/img/r-socket-pink.svg" alt="" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">RSocket</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/about/faq">About</a><a class="navbar__item navbar__link" href="/guides">Guides</a><a href="https://github.com/rsocket" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/community">Community</a><a href="https://crowdfunding.lfx.linuxfoundation.org/projects/bb4066fb-8137-4557-8224-f17dba073494" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Funding</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/about/faq">FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/about/motivations">Motivations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/about/protocol">Protocol</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/about/implementations">Implementations</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">FAQ</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Frequently Asked Questions</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-a-new-protocol">Why a new protocol?<a class="hash-link" href="#why-a-new-protocol" title="Direct link to heading">​</a></h2><p>The full explanation of our motivations in creating a new protocol can be found in the <a href="/about/motivations">Motivations document</a>.</p><p>Some of the key reasons include:</p><ul><li>support for interaction models beyond request/response such as streaming responses and push</li><li>application-level flow control semantics (async pull/push of bounded batch sizes) across network boundaries</li><li>binary, multiplexed use of a single connection</li><li>support resumption of long-lived subscriptions across transport connections</li><li>need of an application protocol in order to use transport protocols such as WebSockets and <a href="https://github.com/real-logic/Aeron" target="_blank" rel="noopener noreferrer" title="Efficient reliable UDP unicast, UDP multicast, and IPC message transport.">Aeron</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-not-make-do-with-xyz">Why not make do with XYZ?<a class="hash-link" href="#why-not-make-do-with-xyz" title="Direct link to heading">​</a></h2><p>Ultimately all of the above motivations could be accomplished on top of most anything with enough effort. Those involved with starting this project desired something cleaner and more formalized. In other words, it was desired to have a solution that was not a hack.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-not-http2">Why not HTTP/2?<a class="hash-link" href="#why-not-http2" title="Direct link to heading">​</a></h2><p>HTTP/2 is <strong>much</strong> better than HTTP/1 for browsers and request/response document transfer, but unfortunately does not expose interaction models beyond request/response, nor support application-level flow control.</p><p>Here are some quotes from the HTTP/2 spec and FAQ that are useful to provide context on what HTTP/2 was targeting:</p><blockquote><p>“HTTP’s existing semantics remain unchanged.”</p></blockquote><blockquote><p>“…<!-- --> <!-- -->from the application perspective, the features of the protocol are largely unchanged<!-- --> <!-- -->…”</p></blockquote><blockquote><p>“This effort was chartered to work on a revision of the wire protocol — i.e., how HTTP headers, methods, etc. are put ‘onto the wire’, not change HTTP’s semantics.”</p></blockquote><p>Additionally, “push promises” are focused on filling browser caches for standard web browsing behavior:</p><blockquote><p>“Pushed responses are always associated with an explicit request from the client.”</p></blockquote><p>This means we still need SSE or WebSockets (and SSE is a text protocol so requires Base64 encoding to UTF-8) for push.</p><p>HTTP/2 was meant as a better HTTP/1.1, primarily for document retrieval in browsers for websites. We can do better than HTTP/2 for applications.</p><p>See also the RSocket <a href="/about/motivations">Motivations document</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-about-quic">What about QUIC?<a class="hash-link" href="#what-about-quic" title="Direct link to heading">​</a></h2><p>QUIC isn’t exposed or available enough at this point to be useful. If/when that changes, we hope to use it as a transport layer for RSocket.</p><p>RSocket specifically is intended for layering on top of something like QUIC. QUIC offers reliable transport, congestion control, byte-level flow control, and multiplexed byte streams. RSocket layers on top of those things the binary framing and behavioral semantics of message streams (unidirectional and bidirectional), message-level flow control, resumption, etc.</p><p>The RSocket spec was created with layering in mind so that on a protocol like TCP, RSocket includes frame length and stream IDs. But on something like HTTP/2 or QUIC, RSocket would skip those and use the ones offered by HTTP/2 or QUIC.</p><p>See <a href="https://github.com/rsocket/rsocket/blob/master/Protocol.md#framing-format" target="_blank" rel="noopener noreferrer">“RSocket Protocol: Framing Format”</a>:</p><blockquote><p>When using a transport protocol that does not provide compatible framing, the Frame Length MUST be prepended to the RSocket Frame.</p></blockquote><p>And see <a href="https://github.com/rsocket/rsocket/blob/master/Protocol.md#frame-header-format" target="_blank" rel="noopener noreferrer">“RSocket Protocol: Frame Header Format”</a>:</p><blockquote><p>Transport protocols that include demultiplexing, such as HTTP/2, MAY omit the Stream ID field if all parties agree. The means of negotiation and agreement is left to the transport protocol.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-reactive-streams-requestn-flow-control">Why “Reactive Streams” <code>request(n)</code> Flow Control?<a class="hash-link" href="#why-reactive-streams-requestn-flow-control" title="Direct link to heading">​</a></h2><p>Without application feedback in terms of work units done (not bytes), it is easy to cause “head of line blocking”, overwhelm network and application buffers, and produce more data on the server than the client can handle. This is particularly bad when multiplexing multiple streams over a single connection where one stream can starve all others. Application layer <code>request(n)</code> semantics allows the consumer to signal how much it can receive on each stream, and allows the producer to interleave multiple streams together.</p><p>Following are further details on some problems that can occur when using TCP and relying solely on its flow control:</p><ul><li>Data is buffered by TCP on the sender and receiver side which means that understanding what is done at the level of the subscriber is not possible.</li><li>A sender who needs to send a large work unit (larger than the buffering on the TCP sender or receiver sides) is stuck in a scenario of poor behavior where the TCP connection will cycle between full and empty, and under-utilize the buffering drastically (as well as the throughput).</li><li>TCP handles a single sender/receiver pair and Reactive Streams allows for multiple senders and/or multiple receivers (somewhat), and (most importantly) decoupling of data reception at the transport layer from application consumption control. An application may want to artificially slow down or limit processing separately from pulling off the data from the transport.</li></ul><p>It all comes down to what TCP is designed to do (not overrun the receiver OS buffer space or network queues) and what Reactive Streams flow control is designed to do (allow for push/pull application work unit semantics, additional dissemination models, and application control of when it is ready for more or not). This clear separation of concerns is necessary for any real system to operate efficiently.</p><p>This illustrates why every single solution that doesn’t have built-in flow control at the application level (pretty much every solution mentioned aside from MQTT, AMQP, and STOMP) is not well-suited for usage, and why RSocket incorporates application-level flow control as a first-class requirement.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="connection-setup-requirement">Connection Setup Requirement<a class="hash-link" href="#connection-setup-requirement" title="Direct link to heading">​</a></h2><p>This is effectively the same as the HTTP/2 requirement to exchange SETTINGS frames—see:</p><ul><li><a href="https://httpwg.org/specs/rfc7540.html#ConnectionHeader" target="_blank" rel="noopener noreferrer">HTTP/2 Spec: HTTP/2 Connection Preface</a></li><li><a href="https://httpwg.org/specs/rfc7540.html#discover-http" target="_blank" rel="noopener noreferrer">HTTP/2 Spec: Starting HTTP/2 for &quot;http&quot; URIs</a></li></ul><p>HTTP/2 and RSocket both require a stateful connection with an initial exchange.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="transport-layer">Transport Layer<a class="hash-link" href="#transport-layer" title="Direct link to heading">​</a></h2><p>HTTP/2 <a href="https://http2.github.io/http2-spec/#starting" target="_blank" rel="noopener noreferrer">requires TCP</a>. RSocket <a href="http://rsocket.io/about/Protocol#terminology" target="_blank" rel="noopener noreferrer">requires TCP, WebSockets or Aeron</a>.</p><p>We have no intention of this running over HTTP/1.1. We also do not intend on running over HTTP/2 when fronted only by HTTP/1.1 APIs (as browsers expose), though that could be explored and conceptually is possible (with the use of SSE or chunked encoding). If using an HTTP/2 implementation that exposes the underlying byte streams, then HTTP/2 can be used as a transport (and this is in fact done in at least one production use of RSocket).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="proxying">Proxying<a class="hash-link" href="#proxying" title="Direct link to heading">​</a></h2><p>Proxies that behave correctly for HTTP/2 will behave correctly for RSocket.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="frame-length">Frame Length<a class="hash-link" href="#frame-length" title="Direct link to heading">​</a></h2><p>It is optional depending on the transport.</p><p>On TCP, it will be included. On Aeron or WebSockets it is not needed.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="state-spanning-connections">State Spanning Connections<a class="hash-link" href="#state-spanning-connections" title="Direct link to heading">​</a></h2><p>We determine this to be an unnecessary optimization at this protocol layer since the application has to be involved to make it work. Applications maintain state between connections. It is also very complex to implement for negligible gain. Many distributed systems implementations <a href="https://aphyr.com/tags/jepsen" target="_blank" rel="noopener noreferrer">fail to correctly handle these types of problems</a>.</p><p>The RSocket protocol does however provide the necessary communication mechanisms for client and server to maintain state and re-establish sessions on new transport connections.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="future-proofing">Future-Proofing<a class="hash-link" href="#future-proofing" title="Direct link to heading">​</a></h2><p>There is no way to fully future-proof something, but we have made attempts to future-proof RSocket in the following ways:</p><ul><li>Frame type has a reserved value for extension</li><li>Error code has a reserved value for extension</li><li>Setup has a version field</li><li>All fields have been sized according to given requirements as known currently (such as <code>streamId</code> supporting 4b requests)</li><li>There is plenty of space for additional flags</li><li>Separation of data and metadata</li><li>Use of MimeType in Setup to eliminate coupling with encoding</li></ul><p>Additionally, we have stuck within connection-oriented semantics of HTTP/2 and TCP so that connection behavior is not abnormal or special.</p><p>Beyond those factors, TCP has existed since 1977. We do not expect it to be eliminated in the near future. QUIC looks to be a legitimate alternative to TCP in the coming years. Since HTTP/2 is already working over QUIC, we see no reason why RSocket will not also work over QUIC.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prioritization-qos-oob">Prioritization, QoS, OOB<a class="hash-link" href="#prioritization-qos-oob" title="Direct link to heading">​</a></h2><p>Prioritization, QoS, OOB is allowed with metadata, app-level logic, and app control of emission.
RSocket does not enforce a queuing model, nor an emission model, nor a processing model. To be effective with QoS, it would need to control all aspects. This is not realistically possible without cooperation from the app logic as well as the underlying network layer. It’s the same reason why HTTP/2 does not go into that area either and simply provides a means to express intent. With metadata, RSocket doesn’t even need to do that.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-is-cancellation-required">Why is cancellation required?<a class="hash-link" href="#why-is-cancellation-required" title="Direct link to heading">​</a></h2><p>Modern distributed system topologies tend to have multiple levels of request fan-out. It means that one request at one level may lead to tens of requests to multiple backends. Being able to cancel a request can save a non-trivial amount of work.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-example-use-cases-of-cancellation">What are example use cases of cancellation?<a class="hash-link" href="#what-are-example-use-cases-of-cancellation" title="Direct link to heading">​</a></h2><p>Let’s imagine a server responsible for computing the <em>n</em>th digit of Pi. A client sends a request to that server but realizes later that it doesn’t want/need the response anymore (for arbitrary reasons). Rather than letting the server do the computation in vain, it can cancel it (the server may not even have started the work).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-example-use-cases-of-request-stream">What are example use cases of request-stream?<a class="hash-link" href="#what-are-example-use-cases-of-request-stream" title="Direct link to heading">​</a></h2><p>Let’s imagine a chat server; you want to receive all the messages said in the chat server but you don’t want to poll or continuously poll (long polling technique). Another example might be that you want to listen to a particular chat room and ignore all other messages.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-example-use-cases-of-fire-and-forget-versus-request-response">What are example use cases of fire-and-forget versus request-response?<a class="hash-link" href="#what-are-example-use-cases-of-fire-and-forget-versus-request-response" title="Direct link to heading">​</a></h2><p>Some requests don’t require a response, and when it’s fine to simply ignore any failure to send a response, fire-and-forget is the right solution. An example could be non-critical metrics-tracking in environments where UDP is inappropriate.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-binary">Why Binary?<a class="hash-link" href="#why-binary" title="Direct link to heading">​</a></h2><p>See <a href="https://http2.github.io/faq/#why-is-http2-binary" target="_blank" rel="noopener noreferrer">HTTP/2 FAQ: Why is HTTP/2 binary?</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="doesnt-binary-encoding-make-debugging-harder">Doesn’t binary encoding make debugging harder?<a class="hash-link" href="#doesnt-binary-encoding-make-debugging-harder" title="Direct link to heading">​</a></h2><p>Yes, but the tradeoff is worth it.</p><p>Binary encoding makes reading messages more difficult for humans, but it also makes reading them easier for machines. There’s also a significant performance gain by not decoding the content.
Because we estimate that 99.9999999%+ of the messages will be read by a machine, we decided to make the reading easier for a machine.</p><p>There are extant tools for analyzing binary protocol exchanges, and new tools and extensions can readily be written to decode the binary RSocket format and present human-readable text.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-tooling-exists-for-debugging-the-protocol">What tooling exists for debugging the protocol?<a class="hash-link" href="#what-tooling-exists-for-debugging-the-protocol" title="Direct link to heading">​</a></h2><p>Wireshark is the recommended tool. The plugin is at <a href="https://github.com/rsocket/rsocket-wireshark" target="_blank" rel="noopener noreferrer">https://github.com/rsocket/rsocket-wireshark</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-are-these-different-flow-control-approaches-needed-beyond-what-the-transport-layer-offers">Why are these different flow control approaches needed beyond what the transport layer offers?<a class="hash-link" href="#why-are-these-different-flow-control-approaches-needed-beyond-what-the-transport-layer-offers" title="Direct link to heading">​</a></h2><p>TCP Flow Control is designed to control the rate of bytes from the sender/reader based on the consuming rate of the remote side. With RSocket, the streams are multiplexed on the same transport connection, so having flow control at the RSocket level is actually mandatory.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-example-use-cases-where-rsocket-flow-control-helps">What are example use cases where RSocket flow control helps?<a class="hash-link" href="#what-are-example-use-cases-where-rsocket-flow-control-helps" title="Direct link to heading">​</a></h2><p>Flow control helps an application signal its capability to consume responses. This ensures that we never overflow any queue on the application layer.
Relying on the TCP flow control doesn’t work, because we multiplex the streams on the same connection.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-does-rsocket-flow-control-behave">How does RSocket flow control behave?<a class="hash-link" href="#how-does-rsocket-flow-control-behave" title="Direct link to heading">​</a></h2><p>There are two types of flow control:</p><ul><li>One is provided by the request-<em>n</em> semantics defined in Reactive Streams (please <a href="http://www.reactive-streams.org" target="_blank" rel="noopener noreferrer" title="Reactive Streams is an initiative to provide a standard for asynchronous stream processing with non-blocking back pressure.">read the spec</a> for exhaustive details).</li><li>The second is provided via the lease semantics defined in the <a href="http://rsocket.io/about/Protocol#lease-semantics" target="_blank" rel="noopener noreferrer">Protocol document</a>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-does-rsocket-benefit-a-client-side-load-balancer-in-a-data-center">How does RSocket benefit a client-side load balancer in a data center?<a class="hash-link" href="#how-does-rsocket-benefit-a-client-side-load-balancer-in-a-data-center" title="Direct link to heading">​</a></h2><p>Each RSocket provides an availability number abstractly representing its capacity to send traffic.
For instance, when a client doesn’t have a valid lease, it exposes a “0.0” availability, indicating that it can’t send any traffic. This extra piece of information, in combination with any load balancing strategy already used, gives more information to the client so it can make smarter decisions.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-is-multiplexing-more-efficient">Why is multiplexing more efficient?<a class="hash-link" href="#why-is-multiplexing-more-efficient" title="Direct link to heading">​</a></h2><p>See:</p><ul><li><a href="https://http2.github.io/faq/#why-is-http2-multiplexed" target="_blank" rel="noopener noreferrer">HTTP/2 FAQ: Why is HTTP/2 multiplexed?</a></li><li><a href="https://http2.github.io/faq/#why-just-one-tcp-connection" target="_blank" rel="noopener noreferrer">HTTP/2 FAQ: Why just one TCP connection?</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="is-multiplexing-equivalent-to-pipelining">Is multiplexing equivalent to pipelining?<a class="hash-link" href="#is-multiplexing-equivalent-to-pipelining" title="Direct link to heading">​</a></h2><p>No. Pipelining requires reading the responses in the order of the requests.</p><p>For example, with pipelining: a client sends <code>reqA</code>, <code>reqB</code>, <code>reqC</code>. It has to receive the responses in this order: <code>respA</code>, <code>respB</code>, <code>respC</code>.</p><p>With multiplexing, the same client can receive responses in any order, e.g. <code>respB</code>, <code>respA</code>, <code>respC</code>.</p><p>Pipelining can introduce <a href="https://en.wikipedia.org/wiki/Head-of-line_blocking" target="_blank" rel="noopener noreferrer">head-of-line-blocking</a> and degrade the performance of the system.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-is-the-tls-false-start-strategy-useful-for-establishing-a-connection">Why is the “TLS False start” strategy useful for establishing a connection?<a class="hash-link" href="#why-is-the-tls-false-start-strategy-useful-for-establishing-a-connection" title="Direct link to heading">​</a></h2><p>When respecting the lease semantics, establishing a RSocket between a client and a server requires one round-trip (⇒<!-- --> <!-- -->SETUP, ⇐<!-- --> <!-- -->LEASE, ⇒<!-- --> <!-- -->REQUEST). On a slow network or when the connection latency is important, this round-trip is harmful. That’s why you have the possibility to not respect the lease, and then can send your request right away (⇒<!-- --> <!-- -->SETUP, ⇒<!-- --> <!-- -->REQUEST).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-example-use-cases-for-payload-data-on-the-setup-frame">What are example use cases for payload data on the Setup frame?<a class="hash-link" href="#what-are-example-use-cases-for-payload-data-on-the-setup-frame" title="Direct link to heading">​</a></h2><p>You may want to pass data to your application at RSocket establishment, rather than reimplementing a connect protocol on top of RSocket.
RSocket allows you to send information alongside the SETUP frame.
For instance, this can be used by a client to send its credentials.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-multiple-interaction-models">Why multiple interaction models?<a class="hash-link" href="#why-multiple-interaction-models" title="Direct link to heading">​</a></h2><p>The interaction models could be reduced to just one: “request-channel”. Every other interaction model is a subtype of request-channel, but they have been specialized for two reasons:</p><ul><li>Ease of use from the client point of view.</li><li>Performance.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="so-why-the-rsocket-name">So why the “RSocket” name?<a class="hash-link" href="#so-why-the-rsocket-name" title="Direct link to heading">​</a></h2><p>It started out as ReactiveSocket, but was shortened to RSocket:</p><ul><li>because it is shorter to write and speak</li><li>to stop overusing the word “reactive”</li></ul><p>That said, the “R” still refers to “reactive” from “ReactiveSocket”, which brings us to the follow-up question: isn’t “Reactive” a totally <a href="http://www.gartner.com/technology/research/methodologies/hype-cycle.jsp" target="_blank" rel="noopener noreferrer">hyped</a> buzzword?</p><p>Unfortunately the word has become quite a buzzword, and overused.</p><p>However, this library is directly related to several projects where “Reactive” is an important part of their name and architectural pattern. Specifically, RSocket implements, uses, or follows the principles in these projects and libraries, thus the name:</p><ul><li><a href="http://www.reactive-streams.org" target="_blank" rel="noopener noreferrer" title="Reactive Streams is an initiative to provide a standard for asynchronous stream processing with non-blocking back pressure.">Reactive Streams</a></li><li><a href="http://www.reactivex.io" target="_blank" rel="noopener noreferrer" title="ReactiveX is an API for asynchronous programming with observable streams.">Reactive Extensions</a></li><li><a href="https://github.com/ReactiveX/RxJava" target="_blank" rel="noopener noreferrer" title="RxJava is a library for composing asynchronous and event-based programs using observable sequences for the Java VM.">RxJava</a></li><li><a href="https://github.com/ReactiveX/RxJS" target="_blank" rel="noopener noreferrer" title="RxJS is a reactive programming library for JavaScript.">RxJS</a></li><li><a href="http://www.reactivemanifesto.org" target="_blank" rel="noopener noreferrer" title="We want systems that are Responsive, Resilient, Elastic, and Message Driven. We call these Reactive Systems.">Reactive Manifesto</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/rsocket/rsocket-website/edit/master/content-docs/about/faq.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-10-10T02:14:30.000Z">Oct 10, 2023</time></b> by <b>jell-o-fishi</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/about/motivations"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Motivations</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-a-new-protocol" class="table-of-contents__link toc-highlight">Why a new protocol?</a></li><li><a href="#why-not-make-do-with-xyz" class="table-of-contents__link toc-highlight">Why not make do with XYZ?</a></li><li><a href="#why-not-http2" class="table-of-contents__link toc-highlight">Why not HTTP/2?</a></li><li><a href="#what-about-quic" class="table-of-contents__link toc-highlight">What about QUIC?</a></li><li><a href="#why-reactive-streams-requestn-flow-control" class="table-of-contents__link toc-highlight">Why “Reactive Streams” <code>request(n)</code> Flow Control?</a></li><li><a href="#connection-setup-requirement" class="table-of-contents__link toc-highlight">Connection Setup Requirement</a></li><li><a href="#transport-layer" class="table-of-contents__link toc-highlight">Transport Layer</a></li><li><a href="#proxying" class="table-of-contents__link toc-highlight">Proxying</a></li><li><a href="#frame-length" class="table-of-contents__link toc-highlight">Frame Length</a></li><li><a href="#state-spanning-connections" class="table-of-contents__link toc-highlight">State Spanning Connections</a></li><li><a href="#future-proofing" class="table-of-contents__link toc-highlight">Future-Proofing</a></li><li><a href="#prioritization-qos-oob" class="table-of-contents__link toc-highlight">Prioritization, QoS, OOB</a></li><li><a href="#why-is-cancellation-required" class="table-of-contents__link toc-highlight">Why is cancellation required?</a></li><li><a href="#what-are-example-use-cases-of-cancellation" class="table-of-contents__link toc-highlight">What are example use cases of cancellation?</a></li><li><a href="#what-are-example-use-cases-of-request-stream" class="table-of-contents__link toc-highlight">What are example use cases of request-stream?</a></li><li><a href="#what-are-example-use-cases-of-fire-and-forget-versus-request-response" class="table-of-contents__link toc-highlight">What are example use cases of fire-and-forget versus request-response?</a></li><li><a href="#why-binary" class="table-of-contents__link toc-highlight">Why Binary?</a></li><li><a href="#doesnt-binary-encoding-make-debugging-harder" class="table-of-contents__link toc-highlight">Doesn’t binary encoding make debugging harder?</a></li><li><a href="#what-tooling-exists-for-debugging-the-protocol" class="table-of-contents__link toc-highlight">What tooling exists for debugging the protocol?</a></li><li><a href="#why-are-these-different-flow-control-approaches-needed-beyond-what-the-transport-layer-offers" class="table-of-contents__link toc-highlight">Why are these different flow control approaches needed beyond what the transport layer offers?</a></li><li><a href="#what-are-example-use-cases-where-rsocket-flow-control-helps" class="table-of-contents__link toc-highlight">What are example use cases where RSocket flow control helps?</a></li><li><a href="#how-does-rsocket-flow-control-behave" class="table-of-contents__link toc-highlight">How does RSocket flow control behave?</a></li><li><a href="#how-does-rsocket-benefit-a-client-side-load-balancer-in-a-data-center" class="table-of-contents__link toc-highlight">How does RSocket benefit a client-side load balancer in a data center?</a></li><li><a href="#why-is-multiplexing-more-efficient" class="table-of-contents__link toc-highlight">Why is multiplexing more efficient?</a></li><li><a href="#is-multiplexing-equivalent-to-pipelining" class="table-of-contents__link toc-highlight">Is multiplexing equivalent to pipelining?</a></li><li><a href="#why-is-the-tls-false-start-strategy-useful-for-establishing-a-connection" class="table-of-contents__link toc-highlight">Why is the “TLS False start” strategy useful for establishing a connection?</a></li><li><a href="#what-are-example-use-cases-for-payload-data-on-the-setup-frame" class="table-of-contents__link toc-highlight">What are example use cases for payload data on the Setup frame?</a></li><li><a href="#why-multiple-interaction-models" class="table-of-contents__link toc-highlight">Why multiple interaction models?</a></li><li><a href="#so-why-the-rsocket-name" class="table-of-contents__link toc-highlight">So why the “RSocket” name?</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Projects</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/rsocket" target="_blank" rel="noopener noreferrer" class="footer__link-item">RSocket GitHub</a></li><li class="footer__item"><a href="https://github.com/rsocket/rsocket-java" target="_blank" rel="noopener noreferrer" class="footer__link-item">RSocket Java</a></li><li class="footer__item"><a href="https://github.com/rsocket/rsocket-kotlin" target="_blank" rel="noopener noreferrer" class="footer__link-item">RSocket Kotlin</a></li><li class="footer__item"><a href="https://github.com/rsocket/rsocket-js" target="_blank" rel="noopener noreferrer" class="footer__link-item">RSocket JS</a></li><li class="footer__item"><a href="https://github.com/rsocket/rsocket-py" target="_blank" rel="noopener noreferrer" class="footer__link-item">RSocket Python</a></li><li class="footer__item"><a href="https://github.com/rsocket/rsocket-swift" target="_blank" rel="noopener noreferrer" class="footer__link-item">RSocket Swift</a></li><li class="footer__item"><a href="https://github.com/rsocket/rsocket-rust" target="_blank" rel="noopener noreferrer" class="footer__link-item">RSocket Rust</a></li><li class="footer__item"><a href="https://github.com/rsocket/rsocket-cpp" target="_blank" rel="noopener noreferrer" class="footer__link-item">RSocket C++</a></li><li class="footer__item"><a href="https://github.com/rsocket/rsocket-go" target="_blank" rel="noopener noreferrer" class="footer__link-item">RSocket Go</a></li><li class="footer__item"><a href="https://github.com/rsocket/rsocket-net" target="_blank" rel="noopener noreferrer" class="footer__link-item">RSocket .Net</a></li><li class="footer__item"><a href="https://github.com/rsocket/rsocket-dart" target="_blank" rel="noopener noreferrer" class="footer__link-item">RSocket Dart</a></li><li class="footer__item"><a href="https://github.com/rsocket/rsocket-php" target="_blank" rel="noopener noreferrer" class="footer__link-item">RSocket PhP</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://crowdfunding.lfx.linuxfoundation.org/projects/bb4066fb-8137-4557-8224-f17dba073494" target="_blank" rel="noopener noreferrer" class="footer__link-item">Funding</a></li><li class="footer__item"><a href="https://discord.gg/qPy6msaUrr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/RSocketIO" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/rsocket" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://www.youtube.com/results?search_query=rsocket" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/r-socket-pink.svg" alt="RSocket Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/img/r-socket-pink.svg" alt="RSocket Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></div><div class="footer__copyright">Copyright © 2023 RSocket Contributors</div></div></div></footer></div>
<script src="/assets/js/runtime~main.7160a9ac.js"></script>
<script src="/assets/js/main.e90efc2b.js"></script>
</body>
</html>